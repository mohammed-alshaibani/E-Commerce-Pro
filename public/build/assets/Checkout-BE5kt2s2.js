import{G as R,y as q,v as B,u as N,n as U,H as K,d as x,j as E,c as d,o as l,a as e,l as k,b as v,t,g as a,F as j,r as I,h as H,C as M,D as L,q as T,m as Q,f as Z,aa as ee,ab as te,a1 as se,p as W,e as oe,w as F,ac as ae,a0 as O,T as ne}from"./app-BYo0NqwC.js";import{_ as le}from"./OrderConfirmModal-C9m6NGHu.js";import{_ as re}from"./VerifyOtpModal-CS8PsLZi.js";import{r as ie}from"./TrashIcon-_g3H2s8z.js";import{_ as de}from"./CheckoutShippingAddress-Cta27mlO.js";import{r as ce}from"./HomeIcon-BoH95a48.js";import"./AddressForm-DMkcGFdP.js";import"./AddressFormModal-BDJTcX6b.js";const ue={class:"p-6 bg-white rounded-2xl border border-slate-200"},me={class:"text-slate-950 text-xl font-medium leading-7"},pe={class:"my-4 flex justify-between gap-4"},he={class:"text-slate-950 text-base font-normal leading-normal"},_e={class:"text-slate-950 text-base font-normal leading-normal"},fe={class:"my-4 flex justify-between gap-4"},ve={class:"text-red-500 text-base font-normal leading-normal"},ye={class:"text-slate-950 text-base font-normal leading-normal"},ge={class:"my-4 flex justify-between gap-4"},be={class:"text-slate-950 text-base font-normal leading-normal"},xe={class:"text-slate-950 text-base font-normal leading-normal"},we={class:"my-4 flex justify-between gap-4"},$e={class:"text-slate-950 text-base font-normal leading-normal"},ke={class:"text-slate-950 text-base font-normal leading-normal"},Ce={key:0,class:"p-3 bg-slate-100 text-black rounded-lg mb-2"},Pe={class:"text-sm sm:text-base font-medium mb-2"},Me={class:"space-y-2"},Se={class:"font-medium"},De={class:"font-medium"},je={class:"mt-4 p-3 bg-slate-200 rounded-lg"},Ie={class:"text-sm sm:text-base font-medium"},Ae={class:"text-base font-bold"},Ve={class:"my-4 flex justify-between gap-4"},Oe={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Te={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Be={class:"p-4 mt-6 bg-slate-100 rounded-xl"},Ne={class:"text-black text-base font-normal leading-normal"},Ue={class:"relative mt-2"},ze=["placeholder"],Ge={class:"absolute top-1/2 -translate-y-1/2 left-3"},He={key:0,class:"p-4 bg-white rounded-xl border border-slate-200 flex items-center justify-between mt-3"},We={class:"animated-text"},Fe={key:2,type:"button",class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},Re={__name:"CheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(A){const b=new q,s=B(),n=N(),w=U(),r=K(),i=x(!1),_=x(""),u=x(!1),y=A;E(()=>{_.value=s.coupon_code});const $=()=>{_.value.length>0&&z()},p=()=>{_.value="",i.value=!1,s.coupon_code="",z()},c={component:se,props:{title:"Order Placed",message:"Your order has been placed successfully."}},C=x(!1),h=()=>{if(!s.address){r.error("Please select shipping address",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"});return}if(y.paymentMethod==null||y.paymentMethod=="card"){r.error("Please select payment method",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"});return}s.checkoutProducts.length>0?(C.value=!0,axios.post("/place-order",{shop_ids:s.selectedShopIds,address_id:s.address.id,payment_method:y.paymentMethod,coupon_code:_.value,note:y.note},{headers:{Authorization:w.token}}).then(o=>{s.checkoutProducts=[],s.selectedShopIds=[],s.coupon_code="",s.total_amount=0,s.delivery_charge=0,s.coupon_discount=0,s.payable_amount=0,C.value=!1,s.fetchCart(),r(c,{type:"default",hideProgressBar:!0,icon:!1,position:n.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});let m=o.data.data.order_payment_url;if(m!=null){V(m);return}else s.showOrderConfirmModal=!0}).catch(o=>{r.error(o.response.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),C.value=!1})):r.error("Please select at least one product",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"})},V=o=>{let m=700,P=700,S=screen.width/2-m/2,g=screen.height/2-P/2,X="popup,resizable,height="+P+",width="+m+",top="+g+",left="+S,f=window.open(o,null,X);if(f.title="Payment Window Screen - Make Payment",f.onload=()=>{f.title="Payment Window Screen - Make Payment",f.closed&&console.log("close window")},f.focus(),f.closed){r.error("Payment Canceled",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"});return}var D=setInterval(Y,1e3);function Y(){try{if(f.closed||!f){clearInterval(D),f.close(),s.orderPaymentCancelModal=!0,r.error("Payment Canceled",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"});return}var G=f.location.pathname.replace(/\/order\/\d+/,"");if(G=="/payment/cancel"){clearInterval(D),setTimeout(()=>{f.close(),s.orderPaymentCancelModal=!0,r.error("Payment Canceled",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"})},8e3);return}if(G=="/payment/success"){f.close(),clearInterval(D),s.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(D),f.close()},18e4)},z=()=>{axios.post("/cart/checkout",{shop_ids:s.selectedShopIds,coupon_code:_.value},{headers:{Authorization:w.token}}).then(o=>{i.value=o.data.data.apply_coupon,s.total_amount=o.data.data.checkout.total_amount,s.delivery_charge=o.data.data.checkout.delivery_charge,s.coupon_discount=o.data.data.checkout.coupon_discount,s.payable_amount=o.data.data.checkout.payable_amount,i.value?(r.success(o.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),s.coupon_code=_.value):(r.error(o.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),s.coupon_code="")}).catch(o=>{r.error(o.response.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(o,m)=>{var P,S;return l(),d("div",null,[e("div",ue,[e("div",me,t(o.$t("Order Summary")),1),e("div",pe,[e("div",he,t(o.$t("Subtotal")),1),e("div",_e,t(a(n).showCurrency(a(s).total_amount)),1)]),e("div",fe,[e("div",ve,t(o.$t("Discount")),1),e("div",ye," -"+t(a(n).showCurrency(a(s).coupon_discount)),1)]),m[3]||(m[3]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",ge,[e("div",be,t(o.$t("Subtotal After Discount")),1),e("div",xe,t(a(n).showCurrency((a(s).total_amount-a(s).coupon_discount).toFixed(2))),1)]),e("div",we,[e("div",$e,t(o.$t("Shipping Charge")),1),e("div",ke,t(a(n).showCurrency(a(s).delivery_charge)),1)]),((P=a(s).all_vat_taxes)==null?void 0:P.length)>0||a(s).order_tax_amount>0?(l(),d("div",Ce,[e("h2",Pe,t(o.$t("VAT & Taxes Summary")),1),e("div",Me,[(l(!0),d(j,null,I(a(s).all_vat_taxes,g=>(l(),d("div",{key:g.id,class:"flex justify-between bg-slate-200 p-2 rounded-lg"},[e("span",Se,[H(t(g.name)+" ",1),e("small",null,"("+t(g.percentage)+"%)",1)]),e("span",De,t(a(n).showCurrency(g.amount)),1)]))),128))]),e("div",je,[e("h3",Ie,t(o.$t("Total Tax Amount"))+": ",1),e("p",Ae,t(a(n).showCurrency(a(s).order_tax_amount)),1)])])):k("",!0),m[4]||(m[4]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",Ve,[e("div",Oe,t(o.$t("Total Payable")),1),e("div",Te,t(a(n).showCurrency(a(s).payable_amount)),1)]),e("div",Be,[e("div",Ne,t(o.$t("Have a coupon"))+"? ",1),e("div",Ue,[M(e("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=g=>_.value=g),class:T(["formInputCoupon pr-14 p-3",i.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,ze),[[L,_.value]]),i.value?(l(),d("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:p},[v(a(ie),{class:"w-6 h-6 text-red-500"})])):(l(),d("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:$},[v(a(Q),{class:"w-6 h-6 text-white"})])),e("span",Ge,[i.value?(l(),Z(a(ee),{key:0,class:"w-6 h-6 text-green-500"})):k("",!0)])])])]),!((S=a(w).user)!=null&&S.account_verified)&&a(n).orderPlaceAccountVerify?(l(),d("div",He,[e("span",We,t(o.$t("Please verify your account")),1),e("button",{class:"p-2 border border-primary rounded-md bg-primary-50 text-primary text-sm font-medium",onClick:m[1]||(m[1]=g=>u.value=!0)},t(o.$t("Verify Now")),1)])):k("",!0),C.value?(l(),d("button",Fe,[H(t(o.$t("Processing"))+" ",1),v(te)])):(l(),d("button",{key:1,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:h},t(o.$t("Place Order")),1)),v(le),v(re,{showModal:u.value,onHideModal:m[2]||(m[2]=g=>u.value=!1)},null,8,["showModal"])])}}},qe=R(Re,[["__scopeId","data-v-d652ed45"]]),Ee={class:"space-y-4 mt-3 transition duration-300"},Le={class:"text-slate-950 text-base font-medium leading-normal"},Xe={class:"space-y-2 divide-y divide-slate-200"},Ye={class:"w-[72px] h-[95px]"},Je=["src"],Ke={class:"flex flex-col gap-1 w-full"},Qe={class:"text-primary text-xs font-normal leading-none"},Ze={class:"text-slate-950 text-base font-normal leading-normal"},et={class:"flex flex-wrap justify-between items-center gap-3"},tt={class:"flex items-center gap-1"},st={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},ot={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},at={class:"text-slate-800 text-base font-normal leading-normal"},nt={__name:"checkoutProducts",setup(A){U();const b=N(),s=B();return(n,w)=>(l(),d("div",Ee,[(l(!0),d(j,null,I(a(s).checkoutProducts,r=>(l(),d("div",{key:r.shop_id,class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},[e("div",Le,t(r.shop_name),1),e("div",Xe,[(l(!0),d(j,null,I(r.products,i=>{var _,u;return l(),d("div",{key:i.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",Ye,[e("img",{src:i.thumbnail,class:"w-full h-full object-contain"},null,8,Je)]),e("div",Ke,[e("div",Qe,t(i.brand),1),e("div",Ze,t(i.name),1),e("div",et,[e("div",tt,[e("div",st,t((_=i.size)==null?void 0:_.name),1),e("div",ot,t((u=i.color)==null?void 0:u.name),1)]),e("div",at,t(i.quantity)+" X "+t(a(b).showCurrency(i.discount_price>0?i.discount_price:i.price)),1)])])])}),128))])]))),128))]))}},lt={class:"main-container"},rt={class:"flex items-center gap-2 overflow-hidden pt-4"},it={class:"grow w-full overflow-hidden"},dt={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},ct={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},ut={class:"col-span-1 xl:col-span-2"},mt={class:"flex gap-2 justify-between items-center"},pt={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},ht={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},_t={key:0},ft={class:"mt-6"},vt={class:"mb-1"},yt={class:"text-slate-950 text-xl font-medium leading-7"},gt={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},bt=["placeholder"],xt={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},wt={class:"text-slate-950 text-xl font-medium leading-7"},$t={class:"mt-4 flex flex-wrap gap-4"},kt={key:0,for:"cash",class:"flex items-center gap-4 xl:min-w-80"},Ct={class:"text-slate-500 text-base font-normal leading-normal"},Pt={key:1,for:"card",class:"flex items-center gap-4 xl:min-w-80"},Mt={class:"text-slate-500 text-base font-normal leading-normal"},St={key:0,class:"mt-5 border-t border-slate-200"},Dt={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},jt={class:"mt-3 flex flex-wrap gap-4"},It=["for"],At=["id","value"],Vt={class:""},Ot=["src"],Tt={__name:"Checkout",setup(A){const b=U(),s=new q,n=N(),w=B(),r=x(!1),i=x(""),_=n.cashOnDelivery?"cash":"card",u=x(_),y=x(null),$=x(null);return E(()=>{window.scrollTo(0,0),w.coupon_code="",y.value=u.value,b.user||s.push({name:"home"}),b.showAddressModal=!1,b.showChangeAddressModal=!1}),W(u,()=>{u.value==="card"?y.value=$.value:y.value=u.value}),W($,()=>{u.value==="card"&&(y.value=$.value)}),(p,c)=>{const C=oe("router-link");return l(),d("div",lt,[e("div",rt,[v(C,{to:"/",class:"w-6 h-6"},{default:F(()=>[v(a(ce),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",it,[e("div",dt,[e("span",null,t(p.$t("Home")),1),c[5]||(c[5]=e("span",null,"/",-1)),e("span",null,t(p.$t("Cart")),1),c[6]||(c[6]=e("span",null,"/",-1)),e("span",null,t(p.$t("Checkout")),1)])])]),e("div",ct,[e("div",ut,[e("div",{class:T(["py-4 border-b tran",r.value?"border-primary":"border-slate-200"])},[e("div",mt,[e("div",pt,t(p.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:c[0]||(c[0]=h=>r.value=!r.value)},[e("div",ht," ("+t(a(w).checkoutTotalItems)+" "+t(p.$t("items"))+") ",1),v(a(ae),{class:T(["w-5 h-5 text-primary-600 transition duration-300",r.value?"rotate-180":""])},null,8,["class"])])]),r.value?(l(),d("div",_t,[v(nt)])):k("",!0)],2),v(de),e("div",ft,[e("div",vt,[e("span",yt,t(p.$t("Note")),1),e("span",gt," ("+t(p.$t("Optional"))+") ",1)]),M(e("textarea",{"onUpdate:modelValue":c[1]||(c[1]=h=>i.value=h),rows:"3",class:"form-input",placeholder:p.$t("Write your note")+"..."},null,8,bt),[[L,i.value]])]),e("div",xt,[e("div",wt,t(p.$t("Payment Method")),1),e("div",$t,[a(n).cashOnDelivery?(l(),d("label",kt,[M(e("input",{"onUpdate:modelValue":c[2]||(c[2]=h=>u.value=h),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[O,u.value]]),c[7]||(c[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",Ct,t(p.$t("Cash on delivery")),1)])):k("",!0),a(n).onlinePayment?(l(),d("label",Pt,[M(e("input",{"onUpdate:modelValue":c[3]||(c[3]=h=>u.value=h),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[O,u.value]]),c[8]||(c[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",Mt,t(p.$t("Credit or Debit Card")),1)])):k("",!0)]),v(ne,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:F(()=>[u.value==="card"?(l(),d("div",St,[e("span",Dt,t(p.$t("Available Payment Gateways")),1),e("div",jt,[(l(!0),d(j,null,I(a(n).paymentGateways,h=>(l(),d("label",{key:h.id,for:h.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[M(e("input",{"onUpdate:modelValue":c[4]||(c[4]=V=>$.value=V),id:h.name,name:"paymentGateway",type:"radio",class:"sr-only",value:h.name},null,8,At),[[O,$.value]]),e("div",Vt,[e("img",{src:h.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,Ot)])],8,It))),128))])])):k("",!0)]),_:1})])]),v(qe,{note:i.value,paymentMethod:y.value},null,8,["note","paymentMethod"])])])}}},Rt=R(Tt,[["__scopeId","data-v-f025ba38"]]);export{Rt as default};
